!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).easySelectFile={})}(this,(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}var r={NAME:"name",TYPE:"type"},o=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t(this,e);var i=n.toLowerCase().split(",").map((function(e){return e.trim()})).filter((function(e){return!!e}));this.accepts=i,this.filterItems=i.map((function(e){return/^\./.test(e)?{target:r.NAME,regExp:new RegExp("".concat(e.replace(".","\\."),"$"),"i")}:/\/\*/.test(e)?{target:r.TYPE,regExp:new RegExp("^".concat(e.replace("*","[a-z0-9]+"),"$"),"i")}:{target:r.TYPE,regExp:new RegExp("^".concat(e,"$"),"i")}}))}return i(e,[{key:"filter",value:function(e){var t=this;return 0===this.filterItems.length?e:e.filter((function(e){return t.filterItems.some((function(t){return t.regExp.test(e[t.target].toLowerCase())}))}))}},{key:"getInputAccept",value:function(){return this.accepts.join(", ")}}]),e}(),u=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2m";t(this,e),this.size=e.fileSize(n)}return i(e,[{key:"filter",value:function(e){var t=this.size;return e.filter((function(e){return e.size<=t}))}}],[{key:"fileSize",value:function(e){if("number"==typeof e)return e;var t=e.slice(-1).toLowerCase(),n=parseFloat(e.slice(0,-1));switch(t){case"k":return 1024*n;case"m":return 1024*n*1024;case"g":return 1024*n*1024*1024;default:return parseFloat(e)}}}]),e}(),c="SELECT_CANCEL";e.isCancel=function(e){return e===c},e.select=function(e,t){var n=e.accept,i=void 0===n?"":n,r=e.size,l=void 0===r?1/0:r,a=e.multiple,s=void 0!==a&&a,f=new o(i),p=new u(l),d=document.createElement("input");d.type="file",d.style.opacity="0",d.style.position="absolute",d.value="",d.accept=f.getInputAccept(),d.multiple=s;var v=!1;function m(e,n){v||(v=!0,t(e,n))}function h(){setTimeout((function(){E()}),233)}function E(){g(),m(c,null)}function g(){document.removeEventListener("wheel",E,!0),document.removeEventListener("mousemove",E,!0),document.removeEventListener("keydown",E,!0),window.removeEventListener("focus",h,!0)}d.onchange=function(){if(null!==d.files){var e=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]||null);return t}(d.files),t=e;0===e.length&&E(),e=f.filter(e),e=p.filter(e),g(),d.onchange=null,m(null,{files:e,raws:t})}else m(null,{files:[],raws:[]})},document.addEventListener("wheel",E,!0),document.addEventListener("mousemove",E,!0),document.addEventListener("keydown",E,!0),window.addEventListener("focus",h,!0),document.body.appendChild(d),d.click(),document.body.removeChild(d)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=easy-select-file.min.js.map